# è´­ç‰©å°ç¥¨

<aside>
ğŸ’¡ è´­ç‰©å°ç¥¨åœ¨é›¶å”®è¡Œä¸šä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚å½“é¡¾å®¢åœ¨å•†åº—è´­ä¹°å•†å“æ—¶ï¼Œè´­ç‰©å°ç¥¨ä¼šæä¾›è¯¦ç»†çš„è´­ä¹°ä¿¡æ¯ï¼ŒåŒ…æ‹¬å•†å“æ¸…å•ã€ä»·æ ¼ã€è´­ä¹°æ—¥æœŸç­‰ã€‚è¿™ä¸ä»…å¸®åŠ©é¡¾å®¢æ ¸å¯¹è´­ä¹°å†…å®¹ï¼Œè¿˜ä¸ºåç»­çš„é€€æ¢è´§æœåŠ¡æä¾›äº†ä¾¿åˆ©ã€‚
</aside>
<br>

# **å‰ææ¡ä»¶ï¼š**

- Salesforce AppExchange ä¸­æŸ¥æ‰¾æˆ‘ä»¬çš„åº”ç”¨å¹¶å®‰è£…åˆ°ç¯å¢ƒä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![AppExchange](../_images/zh-cn/AppExchange.png)

# **1. æ‰“å¼€è®¾è®¡å™¨**

1.1 é€šè¿‡Home Tabçš„å¿«é€Ÿå¼€å§‹æˆ–æ–°å»ºæ¨¡æ¿æ•°æ®çš„æ–¹å¼æ‰“å¼€è®¾è®¡å™¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create170](../_images/zh-cn/Create170.gif)

# **2. å‡†å¤‡æŠ¥è¡¨**

- 2.1 åœ¨å¼€å§‹è®¾è®¡è¿‡ç¨‹æ—¶ï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥å¸®åŠ©æ‚¨åˆ›å»ºè®¾è®¡çš„åŸºç¡€ã€‚æ‚¨å¯ä»¥é€‰æ‹©æ‰«æä¸€ä¸ªç°æœ‰çš„æŠ¥è¡¨ï¼Œä»ç½‘ç»œä¸Šä¸‹è½½ä¸€ä¸ªæŠ¥è¡¨ï¼Œæˆ–è€…ç›´æ¥ä»è®¾è®¡å·¥å…·çš„æ¨¡æ¿ä¸­å¿ƒé€‰å–ä¸€ä¸ªæ¨¡æ¿ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä»æ¨¡æ¿ä¸­å¿ƒé€‰å–ä¸€ä¸ªè´­ç‰©å°ç¥¨æ¨¡æ¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create171](../_images/zh-cn/Create171.gif)

# **é¡µçœ‰çº¿å’Œé¡µè„šçº¿**

- é¡µçœ‰çº¿å’Œé¡µè„šçº¿åŠŸèƒ½å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**é¡µçœ‰çº¿å’Œé¡µè„šçº¿**ã€‚

# **3. æ¨¡æ¿çš„å±æ€§è®¾ç½®**

- 3.1 æ¨¡æ¿çš„å±æ€§è®¾ç½®å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬3æ­¥**ã€‚

- 3.2 é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æ•°æ®è¾ƒå¤šæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œåˆ†é¡µæ˜¾ç¤ºã€‚ç„¶è€Œï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè´­ç‰©å°ç¥¨æ¨¡æ¿æ˜¯ä¸éœ€è¦è¿›è¡Œåˆ†é¡µæ˜¾ç¤ºçš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ‚¨å¸Œæœ›åœ¨æ•°æ®è¾ƒå¤šçš„æƒ…å†µä¸‹ä¸è¿›è¡Œåˆ†é¡µæ˜¾ç¤ºï¼Œæ‚¨éœ€è¦åœ¨é¢æ¿å±æ€§ä¸­å°†'åˆ†é¡µè§„åˆ™'ä¿®æ”¹ä¸º'ä¸åˆ†é¡µ'ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create172](../_images/zh-cn/Create172.gif)

# **4. å…ƒç´ çš„å®½é«˜å¤§å°è®¾ç½®**

- 4.1 å…ƒç´ çš„å®½é«˜å¤§å°è®¾ç½®å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬4æ­¥**ã€‚

# **5. æ–‡æœ¬å…ƒç´ çš„å±æ€§è®¾ç½®**

- 5.1 æ–‡æœ¬å…ƒç´ çš„å±æ€§è®¾ç½®å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬5æ­¥**ã€‚

# **6. å›¾ç‰‡å…ƒç´ çš„å±æ€§è®¾ç½®**

- 6.1 å›¾ç‰‡å…ƒç´ çš„å±æ€§è®¾ç½®å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬6æ­¥**ã€‚

# **7. ç¼–è¾‘è¡¨æ ¼å…ƒç´ **

- 7.1 é€šå¸¸æƒ…å†µä¸‹ï¼Œè´­ç‰©å°ç¥¨æ¨¡æ¿ä¸­çš„å•†å“ä¿¡æ¯åˆ—è¡¨æ˜¯ä¸éœ€è¦æ˜¾ç¤ºè¡¨å¤´çš„ï¼Œé™¤ééœ€è¦è¿›è¡Œé›†è®¡ï¼Œå¦åˆ™è¡¨å°¾ä¹Ÿæ— éœ€æ˜¾ç¤ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åœ¨è¡¨æ ¼åŸºç¡€å±æ€§ä¸­è®¾ç½®'è¡¨æ ¼å¤´æ˜¾ç¤º'å’Œ'è¡¨æ ¼è„šæ˜¾ç¤º'ã€‚é»˜è®¤ä¸ºæ˜¾ç¤ºï¼Œå¦‚æœæ‚¨ä¸å¸Œæœ›å®ƒä»¬æ˜¾ç¤ºï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªå±æ€§è®¾ç½®ä¸ºä¸æ˜¾ç¤ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create173](../_images/zh-cn/Create173.gif)

- 7.2 å¦‚æœæ‚¨å¸Œæœ›è®¡ç®—å•†å“ä¿¡æ¯è¡¨æ ¼ä¸­ä»·æ ¼çš„åˆè®¡ã€å¹³å‡å€¼ç­‰ï¼Œå¯ä»¥è®¾ç½®æƒ³è¦è®¡ç®—çš„è¡¨æ ¼åˆ—çš„åº•éƒ¨èšåˆç±»å‹ã€‚æ‚¨å¯ä»¥å†³å®šæ˜¯å¦æ˜¾ç¤ºåº•éƒ¨èšåˆæ ‡é¢˜ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰åº•éƒ¨èšåˆæ ‡é¢˜ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥è®¾å®šåº•éƒ¨èšåˆå•å…ƒæ ¼æ˜¯å¦éœ€è¦ä¸å…¶ä»–åˆ—åˆå¹¶ï¼Œä»¥åŠåº•éƒ¨èšåˆå•å…ƒæ ¼çš„å·¦å³å¯¹é½æ–¹å¼ç­‰ã€‚

- 7.2.1 æ‚¨å¯ä»¥è¿›è¡Œåº•éƒ¨èšåˆç±»å‹ã€åº•éƒ¨èšåˆæ ‡é¢˜ä»¥åŠåº•éƒ¨èšåˆæ–‡æœ¬çš„è®¾å®šã€‚**è¯·æ³¨æ„ï¼Œåªæœ‰è®¾ç½®äº†åº•éƒ¨èšåˆç±»å‹åï¼Œåº•éƒ¨èšåˆæ ‡é¢˜æ‰ä¼šæ˜¾ç¤ºã€‚**å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create174](../_images/zh-cn/Create174.gif)

- 7.2.2 æ‚¨å¯ä»¥è®¾å®š'åº•éƒ¨èšåˆåˆå¹¶åˆ—æ•°'ï¼Œä»å½“å‰åˆ—çš„å•å…ƒæ ¼å¼€å§‹å‘ååˆå¹¶çš„å•å…ƒæ ¼æ•°ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create175](../_images/zh-cn/Create175.gif)

- 7.2.3 æ‚¨å¯ä»¥è®¾å®š'åº•éƒ¨èšåˆç±»å‹å·¦å³å¯¹é½'ï¼Œè¿™å¯ä»¥æŒ‡å®šå½“å‰èšåˆå•å…ƒæ ¼çš„å·¦å³å¯¹é½æ–¹å¼ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create176](../_images/zh-cn/Create176.gif)

- 7.2.4 å¦‚æœè®¡ç®—çš„ç»“æœåŒ…å«å°æ•°ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¾ç½®'åº•éƒ¨èšåˆå°æ•°'æ¥å†³å®šä¿ç•™å¤šå°‘ä½å°æ•°ï¼Œæˆ–è€…åªä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create177](../_images/zh-cn/Create177.gif)

- 7.3 é€šå¸¸æƒ…å†µä¸‹ï¼Œè´­ç‰©å°ç¥¨çš„è¡¨æ ¼å…ƒç´ è¾¹æ¡†éœ€è¦éšè—ã€‚è¡¨æ ¼å…ƒç´ çš„è¾¹æ¡†é»˜è®¤æ˜¯æ˜¾ç¤ºçš„ã€‚å¦‚æœæ‚¨æƒ³è¦éšè—è¡¨æ ¼è¾¹æ¡†ï¼Œå¯ä»¥åœ¨è¡¨æ ¼æ ·å¼å±æ€§ä¸­è®¾ç½®è¡¨æ ¼è¾¹æ¡†ã€è¡¨å¤´è¾¹æ¡†ã€è¡¨å¤´å•å…ƒæ ¼è¾¹æ¡†ã€è¡¨ä½“è¡Œè¾¹æ¡†ã€è¡¨ä½“å•å…ƒæ ¼è¾¹æ¡†ã€è¡¨å°¾è¾¹æ¡†å’Œè¡¨å°¾å•å…ƒæ ¼è¾¹æ¡†æ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚

- 7.3.1 è¡¨æ ¼è¾¹æ¡†ã€è¡¨å¤´è¾¹æ¡†å’Œè¡¨å¤´å•å…ƒæ ¼è¾¹æ¡†è®¾å®šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create178](../_images/zh-cn/Create178.gif)

- 7.3.2 è¡¨ä½“è¡Œè¾¹æ¡†å’Œè¡¨ä½“å•å…ƒæ ¼è¾¹æ¡†è®¾å®šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create179](../_images/zh-cn/Create179.gif)

- 7.3.3 è¡¨å°¾è¾¹æ¡†å’Œè¡¨å°¾å•å…ƒæ ¼è¾¹æ¡†è®¾å®šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create180](../_images/zh-cn/Create180.gif)

# **8. ç¼–è¾‘æ‰“å°æ•°æ®ã€æŸ¥çœ‹JSONæ•°æ®æ¨¡å‹ã€å¯¼å‡ºã€ä»æœ¬åœ°æ–‡ä»¶å¯¼å…¥å’Œé¢„è§ˆåŠŸèƒ½**

- 8.1 ç¼–è¾‘æ‰“å°æ•°æ®ã€æŸ¥çœ‹JSONæ•°æ®æ¨¡å‹ç­‰åŠŸèƒ½å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬10æ­¥**ã€‚

# **9. ä¿å­˜æ¨¡æ¿å’ŒæŸ¥çœ‹æ¨¡æ¿ä¿¡æ¯**

- 9.1 ä¿å­˜æ¨¡æ¿å’ŒæŸ¥çœ‹æ¨¡æ¿ä¿¡æ¯å¤„ç†å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬11æ­¥**ã€‚

# **10. æŠ½å–ä¸šåŠ¡æ•°æ®**

- 10.1 é€šè¿‡ç‚¹å‡»æŸ¥çœ‹Apex Classæ•°æ®æ¨¡å‹æŒ‰é’®æˆ–é€šè¿‡å¿«æ·é”®(Ctrl / Command + M)æ‰“å¼€æŸ¥çœ‹Apex Classæ•°æ®æ¨¡å‹ç”»é¢ï¼Œå°†ä»£ç å…¨éƒ¨å¤åˆ¶åç‚¹å‡»å–æ¶ˆå…¨å±æŒ‰é’®ï¼Œå¹¶æ‰“å¼€å·²ä¿å­˜çš„æ¨¡æ¿æ•°æ®æŸ¥çœ‹æ¨¡æ¿çš„ä¿¡æ¯ï¼Œå¤åˆ¶çš„ä»£ç ç”¨äº**10.3æ­¥éª¤**åˆ›å»ºè‡ªå®šä¹‰æ‰“å°æ•°æ®è¿”å›çš„å¯¹è±¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create181](../_images/zh-cn/Create181.gif)

- 10.2 æŠ½å–ä¸šåŠ¡æ•°æ®å¤„ç†å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬12æ­¥**ã€‚

- 10.3 é€šè¿‡**10.1æ­¥éª¤**å¤åˆ¶çš„ä»£ç åˆ›å»ºä¸€ä¸ªæ–°çš„ApexClassæ–‡ä»¶ï¼Œç”¨äºè‡ªå®šä¹‰å¼€å‘æŠ½å–æ•°æ®åè¿”å›çš„å¯¹è±¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create182](../_images/zh-cn/Create182.gif)

- 10.4 ç¼–è¾‘é€šè¿‡**10.2æ­¥éª¤**æ–°å»ºçš„Apex Classæ–‡ä»¶ï¼Œé€šè¿‡è‡ªå®šä¹‰å¼€å‘ï¼Œç¼–å†™SQLæŠ½å–ä¸šåŠ¡æ•°æ®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create183](../_images/zh-cn/Create183.gif)

- 10.4.1 å®Œæ•´Apex Classä»£ç ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š

```
public with sharing class Demo_Ctrl01 {
    public Demo_Ctrl01 (ApexPages.StandardController controller) {}
    public List<String> templateNames {get; set;}
    public String dataSource { get; set; }
    public String printSeviceName { get; set; }
    public String machineId { get; set; }
    public String printMode { get; set; }
    public List<String> itemIds { get; set; }
    public List<SObject> selectedObjects { get; set; }

    public void initAction() {
        templateNames = new List<String>{'è²·ã„ç‰©ã®ãƒ¬ã‚·ãƒ¼ãƒˆ'};
        // ã‚«ã‚¹ã‚¿ãƒ é–‹ç™ºã§ã¯ã“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¨­å®šã§ãã¾ã™
        dataSource = objectDataToJsonStr();
        printSeviceName = 'Print Cloud Service Config';
        machineId = 'fdcd6b04-9b6e-48b1-8e57-0ee5caf88063';
    }

    private String objectDataToJsonStr () {
        List<eprint__store_info__c> storeInfos = [
            SELECT 
                eprint__logo__c,
                eprint__posno__c,
                eprint__dt__c,
                eprint__total__c,
                eprint__tax__c,
                eprint__regno__c,
                eprint__charge__c,
                (
                    SELECT 
                        eprint__prodname__c, 
                        eprint__price__c
                    FROM 
                        eprint_store_product_info__r
                ),
                (
                    SELECT 
                        eprint__payname__c, 
                        eprint__payamount__c
                    FROM 
                        eprint_payment_method__r
                ),
                (
                    SELECT 
                        eprint__content__c, 
                        eprint__url__c
                    FROM 
                        eprint_store_events__r
                )
            FROM 
                eprint__store_info__c
            WHERE 
                Name = 'SI-0001'
        ];
        List<TemplateProject> templateProjects = new List<TemplateProject>();
        for (eprint__store_info__c storeInfo : storeInfos) {
            TemplateProject templateProject = new TemplateProject();
            // ãƒ­ã‚´
            templateProject.logo = storeInfo.eprint__logo__c;
            // ãƒã‚¹ãƒ
            templateProject.posno = storeInfo.eprint__posno__c;
            // æ—¥ä»˜/æ™‚é–“
            templateProject.dt = String.valueOf(storeInfo.eprint__dt__c);
            // åˆè¨ˆ
            templateProject.total = String.valueOf(storeInfo.eprint__total__c);
            // ç¨
            templateProject.tax = String.valueOf(storeInfo.eprint__tax__c);
            // ï¾šï½¼ï¾
            templateProject.regno = storeInfo.eprint__regno__c;
            // è²¬
            templateProject.charge = storeInfo.eprint__charge__c;
            // prods ã‚’åˆæœŸåŒ–ã™ã‚‹
            templateProject.prods = new List<TemplateProject.prodsClass>();
            for (eprint__store_product_info__c storeProductInfo : storeInfo.eprint_store_product_info__r) {
                // prodsClass ã‚’åˆæœŸåŒ–ã™ã‚‹
                TemplateProject.prodsClass prodsClass = new TemplateProject.prodsClass(); 
                // å•†å“å
                prodsClass.prodname = storeProductInfo.eprint__prodname__c;
                // ä¾¡æ ¼
                prodsClass.price = String.valueOf(storeProductInfo.eprint__price__c);
                // å„prodsClassã‚’ prods ã«è¿½åŠ ã—ã¾ã™
                templateProject.prods.add(prodsClass);
            }
            // paylist ã‚’åˆæœŸåŒ–ã™ã‚‹
            templateProject.paylist = new List<TemplateProject.paylistClass>();
            for (eprint__payment_method__c paymentMethodInfo : storeInfo.eprint_payment_method__r) {
                // paylistClass ã‚’åˆæœŸåŒ–ã™ã‚‹
                TemplateProject.paylistClass paylistClass = new TemplateProject.paylistClass(); 
                // æ”¯æ‰•ã„å
                paylistClass.payname = paymentMethodInfo.eprint__payname__c;
                // æ”¯æ‰•é¡
                paylistClass.payamount = String.valueOf(paymentMethodInfo.eprint__payamount__c);
                // å„paylistClassã‚’ paylist ã«è¿½åŠ ã—ã¾ã™
                templateProject.paylist.add(paylistClass);
            }
            // campaign ã‚’åˆæœŸåŒ–ã™ã‚‹
            templateProject.campaign = new List<TemplateProject.campaignClass>();
            for (eprint__store_events__c storeEventsInfo : storeInfo.eprint_store_events__r) {
                // campaign ã‚’åˆæœŸåŒ–ã™ã‚‹
                TemplateProject.campaignClass campaignClass = new TemplateProject.campaignClass(); 
                // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
                campaignClass.content = storeEventsInfo.eprint__content__c;
                // URL
                campaignClass.url = storeEventsInfo.eprint__url__c;
                // å„campaignClassã‚’ campaign ã«è¿½åŠ ã—ã¾ã™
                templateProject.campaign.add(campaignClass);
            }
            templateProjects.add(templateProject);
        }
        return JSON.serialize(templateProjects);
    }
}
```

# **11. æ‰“å°é¢„è§ˆå’Œå¯¼å‡ºPDF**

- 11.1 æ‰“å°é¢„è§ˆå’Œå¯¼å‡ºPDFå¤„ç†å¯æŸ¥çœ‹[è¯·æ±‚ä¹¦](sc-request.md)ä¸­çš„**ç¬¬13æ­¥**ã€‚

- 11.2 é¢„è§ˆæ¨¡æ¿æœ€ç»ˆç»“æœã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![Create184](../_images/zh-cn/Create184.gif)
